---
title: KNN算法中有关相似度计算问题简单叙述
id: 155
categories:
  - Machine Learning
date: 2017-03-19 15:24:28
tags:
---

KNN算法的思想就像把一个豆子与一袋子谷物比较，把和这个豆子长得较像的一些谷物挑出来，然后看看这些谷物里都是有什么，如果里面绿豆数量最多，那这个算法就认定这个豆子是绿豆。

它的步骤如下：

1.对一个输入的新数据与已知的n个数据进行比较。

2.分别对它们进行相似度的计算。

3.取相似度最高的k个已知数据。

4.这k个数据中出现最多的数据的类型作为未知数据的类别。

所以相似度的计算是一个关键的问题。

相似度计算公式如下：

[![](http://www.jusot.com/wp-content/uploads/2017/03/16300000349743126968424616674_s-300x125.jpg)](http://www.jusot.com/wp-content/uploads/2017/03/16300000349743126968424616674_s.jpg)                               （其中W是反映数据特征的向量）
根据这个公式我们可以看出这是在n维空间上向量夹角的余弦值，它反映的是两个向量之间的夹角大小，我们知道当两个向量的夹角接近零的时候，可以说明这两个向量近似相等，故我们可以比较数据的特征向量来比较它们的相似程度。

下面举例子：

不妨从简单的开始，倘若需要比较两个人的相似程度，首先要做的是提取两个人的特征值，比如身高、体重、肩宽等等。记录下两个人的数据用两个向量来盛放（特征值的多少决定向量的维数，所记录的特征值越多比较的自然更加精确），那就分别记为α1、α2，最后利用公式求解就行了。

那就再看一下另一个稍微复杂的例子：比如比较两个图片的相似度，任何颜色都可以由三原色复合，比较图片的相似度就只要将一个图片拆分一个个的像素点，将每个像素点的三原色特征值记为一个三维向量，利用公式分别求出每个像素点的相似度，最后在对所有相似度求平均相似度来表示两张图片的相似程度。
就对于两个图中同位置像素点来说，图A中该像素点三原色特征向量是α1=（155,198,200），图B中该像素点三原色特征向量是α2=（155，200，200），代入公式计算sim=(α1_α2)/（|α1|_|α2|）=103629/(321.2928_322.5290)=0.9999736,这样就证明这两个点基本是相似的，接下来分别求各个点在求平均值来代表图片相似度即可。(α1_α2代表两个向量的数量积；|α1|*|α2|代表两个向量模的乘积)

&nbsp;

&nbsp;