---
title: 决策树∠( ᐛ 」∠)＿
id: 257
categories:
  - Machine Learning
date: 2017-05-04 10:41:48
tags:
---

决策树是对一个问题一步步处理的过程，在处理这个问题的时候有许多的约束条件，我们可以依据这些条件，对问题进行决策树的构造，从根部开始因为一步步的条件选择使得处理过程分叉成树状，我们便可以再树的树叶节点得到信息，进而取得最优化的处理方法。![](http://www.jusot.com/wp-content/uploads/2017/05/QQ%E6%88%AA%E5%9B%BE20170504102319.png)

当我们处理问题（记为问题P）时，不同的条件（分别记为a1、a2、a3…..）对问题结果影响程度是不同的。对于构造决策树时也是如此，有的条件（比如a1）影响程度大，就要优先对该条件决策，再对其他条件进行决策，直到对所有条件决策完成，最后根据决策树得到问题P的最优处理方法。

那么如何构造决策树呢？如何判断那种条件对结果影响较大呢？

我们一般通过ID3或C4.5算法来进行构造。

在介绍这两个算法之前需要引入另外一个概念： 熵

特征能够为分类系统带来多少信息，带来的信息越多，该特征越重要。对一个特征而言，系统有它和没它时信息量将发生变化，而前后信息量的差值就是这个特征给系统带来的信息量。所谓信息量，就是熵。假如有变量X，其可能的取值有n种，每一种取到的概率为Pi，那么X的熵就定义为![](http://www.jusot.com/wp-content/uploads/2017/05/QQ%E6%88%AA%E5%9B%BE20170504102359.png)也就是说X可能的变化越多，X所携带的信息量越大，熵也就越大。

*   ID3算法

ID3算法的核心思想就是以信息增益度量属性选择，选择分裂后信息增益最大的属性进行分裂，简单的说就是哪个条件对结果的影响最大就先选择这个条件进行分裂。

算法的过程如下：

1.  设D为用类别对训练元组进行的划分，则D的熵（entropy）表示为： ![](http://www.jusot.com/wp-content/uploads/2017/05/QQ%E6%88%AA%E5%9B%BE20170504102412.png)（其中pi表示第i个类别在整个训练元组中出现的概率）
2.  假设将训练元组D按属性A进行划分，则A对D划分的期望信息为：![](http://www.jusot.com/wp-content/uploads/2017/05/QQ%E6%88%AA%E5%9B%BE20170504102422.png)
3.  信息增益即为两者的差值![](http://www.jusot.com/wp-content/uploads/2017/05/QQ%E6%88%AA%E5%9B%BE20170504102431.png)

之后根据信息增益最大的条件构造决策树即可。

*   5算法（C4.5是ID3的一个改进算法）

用信息增益率来选择属性，克服了用信息增益选择属性时偏向选择取值多的属性的不足，这个表达的意思就是存在唯一标识属性时，ID3算法会选择它作为分裂属性，虽然这个条件的影响程度最大，但这种划分对分类几乎毫无用处。就像你去吃饭根据你的喜好选择早点一样，但是你有没有带钱这个条件虽然对你吃什么影响最大，但是这个条件却没什么用。

该算法与ID3计算上的不同就在于以下两点：

1.  C4.5算法首先定义了“分裂信息”，其定义可以表示成![](http://www.jusot.com/wp-content/uploads/2017/05/QQ%E6%88%AA%E5%9B%BE20170504102445.png)
2.  ，增益率被定义为![](http://www.jusot.com/wp-content/uploads/2017/05/QQ%E6%88%AA%E5%9B%BE20170504102454.png)

同样根据增益率最大的构造决策树即可。

&nbsp;

下边举个例子：

为了适应市场的需要，某地准备扩大电视机生产。市场预测表明：产品销路好的概率为0.7；销路差的概率为0.3。备选方案有三个：第一个方案是建设大工厂，需要投资600万元，可使用10年；如销路好，每年可赢利200万元；如销路不好，每年会亏损40万元。第二个方案是建设小工厂，需投资280万元；如销路好，每年可赢利80万元；如销路不好，每年也会赢利60万元。第三个方案也是先建设小工厂，但是如销路好，3年后扩建，扩建需投资400万元，可使用7年，扩建后每年会赢利190万元。选择哪种方案更有回报呢？

我们可以通过构造决策树来解决这个问题，我们所期望的是最高的利润，所约束我们的是建设大工厂和小工厂的选择和销路是否良好。销路的优良我们是无法选择的，我们所能决策的只有建设哪种类型的工厂，因为工厂的建设按照时间来发展，所以自然是先发生的事件所带来的增益最大，有了这些我们就可以构造决策树来求解了。

构造的树形结构大致如下：![](http://www.jusot.com/wp-content/uploads/2017/05/QQ%E6%88%AA%E5%9B%BE20170504102502.png)

我们可以根据决策树计算出想应得期望：

E(仅建大工厂)=10_（0.7_200+0.3*（-40））-600=680

E(仅建小工厂)=10*60-280=320

E（扩建）=3_80-280+7_190-400=890

这样我们很明白的看出方案三更有回报